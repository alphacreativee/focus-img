gsap.registerPlugin(ScrollTrigger);let config={gap:.08,speed:.3,arcRadius:500},lenis=new Lenis,titlesContainer=(lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{lenis.raf(1e3*t)}),gsap.ticker.lagSmoothing(0),document.querySelector(".spotlight-titles")),imagesContainer=document.querySelector(".spotlight-images"),spotlightHeader=document.querySelector(".spotlight-header"),titlesContainerElement=document.querySelector(".spotlight-titles-container"),introTextElements=document.querySelectorAll(".spotlight-intro-text"),imageElements=document.querySelectorAll(".spotlight-img img"),titleElements=document.querySelectorAll(".spotlight-titles h1"),spotlightItems=[],currentActiveIndex=(titleElements.forEach((t,e)=>{e=imageElements[e];e&&spotlightItems.push({name:t.textContent,img:e.src,titleElement:t,imgElement:e})}),0),containerWidth=.3*window.innerWidth,containerHeight=window.innerHeight,arcStartX=containerWidth-220,arcStartY=-200,arcEndY=containerHeight+200,arcControlPointX=arcStartX+config.arcRadius,arcControlPointY=containerHeight/2;function getBezierPosition(t){return{x:(1-t)*(1-t)*arcStartX+2*(1-t)*t*arcControlPointX+t*t*arcStartX,y:(1-t)*(1-t)*arcStartY+2*(1-t)*t*arcControlPointY+t*t*arcEndY}}function getImgProgressState(t,e){var t=t*config.gap,i=t+config.speed;return e<t?-1:i<e?2:(e-t)/config.speed}imageElements.forEach(t=>gsap.set(t,{opacity:0})),ScrollTrigger.create({trigger:".spotlight",start:"top top",end:`+=${10*window.innerHeight}px`,pin:!0,pinSpacing:!0,scrub:1,onUpdate:t=>{t=t.progress;if(console.log(t),t<=.2){var e=t/.2,n=.6*window.innerWidth;gsap.set(introTextElements[0],{x:-e*n}),gsap.set(introTextElements[1],{x:e*n}),gsap.set(introTextElements[0],{opacity:1}),gsap.set(introTextElements[1],{opacity:1}),gsap.set(".spotlight-bg-img",{transform:`scale(${e})`}),gsap.set(".spotlight-bg-img img",{transform:`scale(${1.5-.5*e})`}),imageElements.forEach(t=>gsap.set(t,{opacity:0})),spotlightHeader.style.opacity=0,gsap.set(titlesContainerElement,{"--before-opacity":"0","--after-opacity":"0"})}else if(.2<t&&t<=.25)gsap.set(".spotlight-bg-img",{transform:"scale(1)"}),gsap.set(".spotlight-bg-img img",{transform:"scale(1)"}),gsap.set(introTextElements[0],{opacity:0}),gsap.set(introTextElements[1],{opacity:0}),imageElements.forEach(t=>gsap.set(t,{opacity:0})),spotlightHeader.style.opacity="1",gsap.set(titlesContainerElement,{"--before-opacity":"1","--after-opacity":"1"});else if(.25<t&&t<=.95){gsap.set(".spotlight-bg-img",{transform:"scale(1)"}),gsap.set(".spotlight-bg-img img",{transform:"scale(1)"}),gsap.set(introTextElements[0],{opacity:0}),gsap.set(introTextElements[1],{opacity:0}),spotlightHeader.style.opacity="1",gsap.set(titlesContainerElement,{"--before-opacity":"1","--after-opacity":"1"});let i=(t-.25)/.7;var n=window.innerHeight,e=titlesContainer.scrollHeight,t=n-i*(n- -e);gsap.set(".spotlight-titles",{transform:`translateY(${t}px)`}),imageElements.forEach((t,e)=>{var e=getImgProgressState(e,i);e<0||1<e?gsap.set(t,{opacity:0}):(e=getBezierPosition(e),gsap.set(t,{x:e.x-100,y:e.y-75,opacity:1}))});let s=n/2,o=0,r=1/0;titleElements.forEach((t,e)=>{t=t.getBoundingClientRect(),t=t.top+t.height/2,t=Math.abs(t-s);t<r&&(r=t,o=e)}),o!==currentActiveIndex&&(titleElements[currentActiveIndex]&&(titleElements[currentActiveIndex].style.opacity="0.25"),titleElements[o].style.opacity="1",(e=document.querySelector(".spotlight-bg-img img"))&&spotlightItems[o]&&(e.src=spotlightItems[o].img),currentActiveIndex=o)}}});